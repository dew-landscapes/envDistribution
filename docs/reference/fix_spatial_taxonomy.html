<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fix taxonomies based on spatial layers (i.e. in particular geographic areas). — fix_spatial_taxonomy • envDistribution</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fix taxonomies based on spatial layers (i.e. in particular geographic areas). — fix_spatial_taxonomy"><meta property="og:description" content="If &amp;gt;=2 range layers exist (i.e. one for each taxa), the closest will be used to update the taxonomic name.
If only one layer exists, the taxa1 will be changed to the taxa2 according to the change_if_intersects argument."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envDistribution</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Calamanthus/envDistribution/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fix taxonomies based on spatial layers (i.e. in particular geographic areas).</h1>
    <small class="dont-index">Source: <a href="https://github.com/Calamanthus/envDistribution/blob/HEAD/R/fix_spatial_taxonomy.R" class="external-link"><code>R/fix_spatial_taxonomy.R</code></a></small>
    <div class="hidden name"><code>fix_spatial_taxonomy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If &gt;=2 range layers exist (i.e. one for each taxa), the closest will be used to update the taxonomic name.
If only one layer exists, the taxa1 will be changed to the taxa2 according to the change_if_intersects argument.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fix_spatial_taxonomy</span><span class="op">(</span></span>
<span>  <span class="va">bio_df</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  <span class="va">taxa_df</span>,</span>
<span>  <span class="va">taxa_ds</span>,</span>
<span>  change_if_intersects <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  taxa_col <span class="op">=</span> <span class="st">"taxa"</span>,</span>
<span>  <span class="va">taxonomy</span>,</span>
<span>  levels_to_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"subspecies"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-bio-df">bio_df<a class="anchor" aria-label="anchor" href="#arg-bio-df"></a></dt>
<dd><p>Data frame with taxa column, and lat &amp; long columns.</p></dd>


<dt id="arg-coords">coords<a class="anchor" aria-label="anchor" href="#arg-coords"></a></dt>
<dd><p>Character vector. Spatial coordinate columns in order of c("x","y"), e.g. c("long", "lat").</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>Integer. Coordinate reference system that the coords correspond to (epsg code).</p></dd>


<dt id="arg-taxa-df">taxa_df<a class="anchor" aria-label="anchor" href="#arg-taxa-df"></a></dt>
<dd><p>Data frame with taxa1 and taxa2 columns indicating the names of the taxa pairs to be fixed.
Single taxa can be input to fix only their records based on to their distribution alone
by entering the single taxa name into the taxa1 column, and leaving taxa2 as NA.
The taxa names need to correspond to the taxa distributions in <code>taxa_ds</code>.</p></dd>


<dt id="arg-taxa-ds">taxa_ds<a class="anchor" aria-label="anchor" href="#arg-taxa-ds"></a></dt>
<dd><p>Data frame. Taxa distribution sources data frame containing 'taxa' and 'file' columns.
File column should reference the file path of the distribution for the associated taxa in the 'taxa' column corresponding to taxa1 and taxa2.</p></dd>


<dt id="arg-change-if-intersects">change_if_intersects<a class="anchor" aria-label="anchor" href="#arg-change-if-intersects"></a></dt>
<dd><p>Logical. If TRUE, change taxonomy if intersects with layer,
or if FALSE, change if doesn't intersect with layer.</p></dd>


<dt id="arg-taxa-col">taxa_col<a class="anchor" aria-label="anchor" href="#arg-taxa-col"></a></dt>
<dd><p>Character. Taxa column in bio_df and taxa_ds (must be the same).</p></dd>


<dt id="arg-taxonomy">taxonomy<a class="anchor" aria-label="anchor" href="#arg-taxonomy"></a></dt>
<dd><p>Taxonomy object returned by envClean::make_taxonomy in relation to the taxa in bio_df and taxa_ds.</p></dd>


<dt id="arg-levels-to-change">levels_to_change<a class="anchor" aria-label="anchor" href="#arg-levels-to-change"></a></dt>
<dd><p>Character vector. At what level of the taxonomic hierarchy are the taxonomic fixes (either 'species' or 'subspecies' or both).
Default is c("species","subspecies").</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Original data frame with corrected taxa names for taxa input into taxa1 and taxa2.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joel Allan, Nigel Willoughby.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

